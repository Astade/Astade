<html>
<head>
 <style type="text/css">
/* <![CDATA[ */ 
@import "http://www.tigris.org/branding/css/tigris.css"; 
@import "http://www.tigris.org/branding/css/inst.css"; 
/*  ]]> */
 </style>
  <link rel="stylesheet" type="text/css" href="http://www.tigris.org/branding/css/print.css" media="print" />
<script src="http://www.tigris.org/branding/scripts/tigris.js" type="text/javascript">
</script>
 <title>Project Overview</title>
</head>
<body>


<h3>Mission</h3>

<p>This project shall develop a console application, which can convert a trace file
in text format to either sequence diagrams or collaboration diagrams.
</p>

<p>The tool will be needed, for the Project <a href="http://astade.tigris.org/">Astade</a>,
it should be useful for Programmers of other projects, too.
</p>

<h3>The features</h3>

<ul>
  <li>a Console Application</li>
  <li>reads special trace files which can easily be generated by any
    application.</li>
  <li>filters this files for a group of objects.</li>
  <li>filters this file for a certain time period.</li>
  <li>draws nice (graphical) sequence diagrams, or</li>
  <li>draws nice (graphical) collaboration diagrams from one source.</li>
  <li>the source (trace file) is pretty good usable as debug trace, too!</li>
</ul>


<h3>The Trace format (example)</h3>

<p><font face="Courier New">
900000&nbsp;&nbsp;&nbsp; (!)     Object1<br>
900000&nbsp;&nbsp;&nbsp; Object1&nbsp; (!)&nbsp; Object2<br>
900001&nbsp;&nbsp;&nbsp; Object1&nbsp; ===>    Object2&nbsp;&nbsp;&nbsp;&nbsp;
DoSomething(void*)<br>
900002&nbsp;&nbsp;&nbsp; Object1&nbsp; &lt;===    Object2&nbsp;&nbsp;&nbsp;&nbsp;
6<br>
900003&nbsp;&nbsp;&nbsp; Object1&nbsp; >>>>    BusyState<br>
900004&nbsp;&nbsp;&nbsp; Object2&nbsp; --->    Object1&nbsp;&nbsp;&nbsp;&nbsp; StartAgain(56)<br>
900005&nbsp;&nbsp;&nbsp; Object2&nbsp; ===>    Object2&nbsp;&nbsp;&nbsp;&nbsp; Wait()<br>
900005&nbsp;&nbsp;&nbsp; Object2&nbsp; INFO &quot;Starting to wait&quot;<br>
900006&nbsp;&nbsp;&nbsp; Object1&nbsp; &lt;---    Object2&nbsp;&nbsp;&nbsp;&nbsp;
StartAgain(56)<br>
900007&nbsp;&nbsp;&nbsp; Object1&nbsp; --->    Object2&nbsp;&nbsp;&nbsp;&nbsp; OK<br>
900008&nbsp;&nbsp;&nbsp; Object2&nbsp; &lt;---    Object1&nbsp;&nbsp;&nbsp;&nbsp;
OK<br>
900009&nbsp;&nbsp;&nbsp; Object2&nbsp; &lt;===    Object2&nbsp;&nbsp;&nbsp;&nbsp;<br>
</font></p>

<h3>The Trace format (details)</h3>

<table border="1" height="307">
  <tr>
    <td align="center" height="38">Symbol</td>
    <td align="center" height="38">short form</td>
    <td height="38">description</td>
  </tr>
  <tr>
    <td align="center" height="38"><font face="Courier New">(!)</font></td>
    <td align="center" height="38"><font face="Courier New"> !</font></td>
    <td height="38">this is used to notify an Object creation. In sequence
      diagrams this will be used, in collaboration diagrams it will have no
      effect.</td>
  </tr>
  <tr>
    <td align="center" height="38"><font face="Courier New">
-X-</font></td>
    <td align="center" height="38"><font face="Courier New">X</font></td>
    <td height="38">this is used to notify an Object delete. In sequence
      diagrams this will be used, in collaboration diagrams it will have no
      effect.</td>
  </tr>
  <tr>
    <td align="center" height="19"><font face="Courier New">
---></font></td>
    <td align="center" height="19"><font face="Courier New"> -></font></td>
    <td height="19">this is used to notify an asynchronous message send.</td>
  </tr>
  <tr>
    <td align="center" height="19"><font face="Courier New">
&lt;---</font></td>
    <td align="center" height="19"><font face="Courier New"> &lt;-</font></td>
    <td height="19">this is used to notify an asynchronous message receive.</td>
  </tr>
  <tr>
    <td align="center" height="19"><font face="Courier New">
===></font></td>
    <td align="center" height="19"><font face="Courier New"> =></font></td>
    <td height="19">this is used to notify a synchronous function call.</td>
  </tr>
  <tr>
    <td align="center" height="19"><font face="Courier New">
&lt;===</font></td>
    <td align="center" height="19"><font face="Courier New"> &lt;=</font></td>
    <td height="19">this is used to notify a synchronous function return.</td>
  </tr>
  <tr>
    <td align="center" height="19"><font face="Courier New">
>>>></font></td>
    <td align="center" height="19"><font face="Courier New"> >></font></td>
    <td height="19">this is used to notify a state change. Only useful when
      reading the Trace for debugging purpose, no influence for the diagrams.</td>
  </tr>
  <tr>
    <td align="center" height="19"><font face="Courier New">
INFO</font></td>
    <td align="center" height="19"><font face="Courier New">&nbsp;</font></td>
    <td height="19">this is used to notify a general debugging info. Only useful
      when reading the Trace for debugging purpose, no influence for the diagrams.</td>
  </tr>
  <tr>
    <td align="center" height="19"><font face="Courier New">
ERROR&nbsp;</font></td>
    <td align="center" height="19"><font face="Courier New">&nbsp;</font></td>
    <td height="19">this is used to notify an error. Only useful when reading
      the Trace for debugging purpose, no influence for the diagrams.</td>
  </tr>
</table>


<p><br>
Remarks:
</p>


<ul>
  <li>Returns are always in the opposite order than calls! Therefore the second
    object name in the trace is redondant and may be &quot;*&quot;</li>
  <li>Messages receive always in the order they are send. Therefore the second
    object name and the message label can be &quot;*&quot;</li>
  <li>Timestamps might be omitted.</li>
</ul>
<h3>The Trace format might be used during design phase</h3>

<p>Till now, the trace format is described to be generated by an instrumented
program. It can also be used during design phase to &quot;draw&quot; diagrams.
The former diagram could be typed like this:</p>

<p><font face="Courier New">!     Object1<br>
Object1 ! Object2<br>
Object1 =&gt;    Object2 DoSomething(void*)<br>
Object1 &lt;= * 6<br>
Object2 -&gt;    Object1 StartAgain(56)<br>
Object2 =&gt;    Object2 Wait()<br>
Object1 &lt;- * *<br>
Object1 -&gt;    Object2 OK<br>
Object2 &lt;- * *<br>
Object2 &lt;= *&nbsp;&nbsp;&nbsp;&nbsp;<br>
</font></p>

<h3>The call parameter of trace2uml</h3>

<p>trace2uml [options] [obj1 obj2 obj3 ...]<br>
<br>
--help, -h, -?		: Shows this list.<br>
--expand, -e		: Trace gets completed, colums get alligned.<br>
--sequence, -s		: a sequence diagram in .pic format is generated.<br>
--collaboration, -c	: a collaboration diagram in .dot format is generated.<br>
--first, -f		: the first line number.<br>
--last, -l		: the last line number.&nbsp;<br>
--debug, -d		: line numbers are added into the diagram<br>
<br>
Example:<br>
<br>
trace2uml -f 13 -l 22 -e Object1 Object2<br>
<br>
Reads line number 13 to 22 from standard input&nbsp;<br>
and writes a completet output of 10 lines to standard output.<br>
Communication to other objects than Object1 and Object2 is omitted.<br>
<br>
trace2uml -s&nbsp;<br>
<br>
Reads all lines up to end of file from standard input&nbsp;<br>
and writes a sequence diagram in PIC format to standard output.<br>
<br>
trace2uml -f 13 -l 22 -c Object1 Object2<br>
<br>
Reads line number 13 to 22 from standard input&nbsp;<br>
and writes a collaboration diagram in dots format standard output.<br>
Communication to other objects than Object1 and Object2 is omitted.<br>
</p>


<h3>Related resources</h3>

<ul>
<li>For collaboration diagrams the .dot format of <a href="http://www.graphviz.org/">graphwiz</a>
  is used.</li>

<li>For sequence diagrams <a href="http://www.spinellis.gr/sw/umlgraph/">UMLGraph</a>
  is used </li>
</ul>

</body>
</html>
